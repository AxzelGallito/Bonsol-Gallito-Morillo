{% extends 'base.html' %}
{% block title %} Home {% endblock %}

{% block body %}
<style>
body {
    background-image: linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)),
                    url('/static/images/BG2.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    background-attachment: fixed;
    font-family: "Poppins", sans-serif;
    color: #fff;
}

/* LAYOUT */
.layout-row {
    display: flex;
    gap: 25px;
}

/* LEFT MENU */
.left-menu-col {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px);
    border-radius: 25px;
    border: 1px solid rgba(255,255,255,0.15);
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    padding: 20px;
    min-width: 200px;
}

.left-menu-title {
    font-size: 20px;
    color: #5ce1e6;
    font-weight: 600;
    margin-bottom: 20px;
    text-align: center;
}

.list-group-item {
    background: rgba(255,255,255,0.05);
    color: #d9d9d9;
    border: none;
    margin-bottom: 10px;
    border-radius: 12px;
    transition: 0.25s ease;
}

.list-group-item:hover {
    background: rgba(92,225,230,0.15);
    color: #fff;
}

.list-group-item.active {
    background: rgba(92,225,230,0.25);
    color: #fff;
    font-weight: 600;
    box-shadow: 0 0 10px rgba(92,225,230,0.7),
                0 0 20px rgba(92,225,230,0.5),
                0 0 30px rgba(92,225,230,0.3);
    transition: 0.3s ease;
}

/* RIGHT CONTENT */
.right-content-col {
    flex: 1;
}

/* STORE HEADER */
.store-header {
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(20px);
    border-radius: 15px;
    padding: 25px;
    text-align: center;
    margin-bottom: 30px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}

.store-header h2 {
    color: #5ce1e6;
    font-weight: 700;
}

.store-header p {
    color: #fff;
    margin-top: 8px;
}

/* PRODUCT CARDS */
.product-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,0.15);
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    display: flex;
    flex-direction: column;
    transition: 0.3s ease;
    padding: 15px;
    text-align: center;

    /* ðŸ”’ FIXED CARD SIZE */
    width: 440px;         /* Lock width */
    height: 510px;        /* Lock height */
}

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 30px rgba(92,225,230,0.4);
}

.product-card img {
    border-radius: 15px;

    /* ðŸ”’ FIXED IMAGE SIZE */
    width: 100%;
    height: 200px;

    object-fit: contain;
    margin: 0 auto 15px auto; /* centers image */
    display: block;
}

.product-card h6 {
    color: #5ce1e6;
    margin-bottom: 5px;
}

.product-card .price {
    color: #fff;
    font-weight: 600;
}

.product-card .previous-price {
    color: #d9d9d9;
    margin-bottom: 10px;
}

.product-card .stock {
    color: #d9d9d9;
    margin-top: 10px;
    font-weight: 500;
}

/* BUTTONS */
.product-card .btn-group {
    display: flex;
    gap: 10px;
    margin-top: auto;
}

.product-card .btn-group a,
.product-card .btn-group button {
    flex: 1;
    text-decoration: none;
    color: #000;
    background: #5ce1e6;
    padding: 6px 12px;
    border-radius: 12px;
    font-weight: 600;
    transition: 0.25s ease;
}

.product-card .btn-group a:hover {
    background: #3cbac3;
    color: #fff;
    box-shadow: 0 0 12px rgba(92,225,230,0.5);
}

.product-card .btn-group button:disabled {
    background: gray;
    color: white;
    font-weight: bold;
    cursor: not-allowed;
}

/* SOLD-OUT PRODUCT CARD SAME DIMENSIONS + DESATURATED IMAGE */
.product-card.sold-out {
    transform: scaleY(1); /* same height as active product */
    opacity: 1;            /* same opacity */
}

.product-card.sold-out img {
    filter: grayscale(80%) brightness(90%);
    transition: 0.3s ease;
}

/* FIX: COMPRESS SPACING FOR SOLD-OUT CARDS */
.product-card.sold-out .price,
.product-card.sold-out .previous-price {
    margin-bottom: 2px !important;
}

.product-card.sold-out .btn-group {
    margin-top: 5px !important;
}

.product-card.sold-out .stock {
    margin-top: 5px !important;
}

/* Shorten the height of the disabled (sold-out) cards */
.product-card.sold-out {
    height: 390px; /* Set a fixed height for the sold-out card */
    padding: 10px; /* Reduce padding */
}

/* BANNERS & BOXES */
.banner, .small-box, .live-banner, .product-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    border: 1px solid rgba(255,255,255,0.15);
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    transition: 0.3s ease;
}

.banner img, .live-banner img, .product-card img {
    border-radius: 15px;
    width: 100%;
    object-fit: cover;
}

.product-card img {
    height: 200px;
    object-fit: contain;
}
</style>

<div class="page-container">
    <div class="layout-row">

        <!-- LEFT MENU / CATEGORY -->
        <div class="left-menu-col">
            <div class="left-menu-title">CATEGORIES</div>
            <div class="list-group">
                <a href="/phones" class="list-group-item {% if active_category == 'phones' %}active{% endif %}"><i class="fa fa-mobile"></i> Phone</a>
                <a href="/laptop" class="list-group-item {% if active_category == 'laptop' %}active{% endif %}"><i class="fa fa-laptop"></i> Laptop</a>
                <a href="/smart-watch" class="list-group-item {% if active_category == 'smart-watch' %}active{% endif %}"><i class="fi fi-sr-watch-smart"></i> Smart Watch</a>
                <a href="/gaming" class="list-group-item {% if active_category == 'gaming' %}active{% endif %}"><i class="fa fa-gamepad"></i> Gaming</a>
                <a href="/tv" class="list-group-item {% if active_category == 'tv' %}active{% endif %}"><i class="fa fa-tv"></i> TV</a>
                <a href="/accessories" class="list-group-item {% if active_category == 'accessories' %}active{% endif %}"><i class="fa fa-headset"></i> Accessories</a>
            </div>
        </div>

        <!-- RIGHT CONTENT -->
        <div class="right-content-col">

            <!-- Banner + Side Boxes -->
            <div class="banner-and-boxes">
                <div class="banner">
                    <img src="../static/images/IMG_1659.GIF" alt="Sale Banner">
                </div>

                <div class="side-boxes">
                    <div class="small-box">
                        <img src="../static/images/help.png" alt="Help Center">
                        <h6>HELP CENTER</h6>
                        <small>Customer care</small>
                    </div>

                    <div class="small-box">
                        <img src="../static/images/return.png" alt="Easy Return">
                        <h6>EASY RETURN</h6>
                        <small>Quick Refund</small>
                    </div>

                    <div class="small-box">
                        <img src="../static/images/payment.png" alt="Sell on TECHNOLOGIA">
                        <h6>SELL ON TECHNOLOGIA</h6>
                        <small>FBA Program</small>
                    </div>

                    <div class="live-banner">
                        <img src="../static/images/IMG_1662.GIF" alt="Live Sale Promo">
                    </div>
                </div>
            </div>

            <!-- PRODUCT GRID -->
            <div class="product-grid">
                {% for item in items %}
                <div class="product-card {% if item.in_stock == 0 %}sold-out{% endif %}">
                    <img src="{{ item.product_picture }}" alt="{{ item.product_name }}">
                    <h6>{{ item.product_name }}</h6>
                    <div class="price">Php {{ item.current_price }}</div>
                    <div class="previous-price"><strike>Php {{ item.previous_price }}</strike></div>

                    <div class="btn-group">
                        {% if item.in_stock > 0 %}
                            <a href="/add-to-cart/{{ item.id }}">Add to Cart</a>
                            <a href="/direct-order/{{ item.id }}">Order Now</a>
                        {% else %}
                            <button disabled>Out of Stock</button>
                        {% endif %}
                    </div>

                    {% if item.in_stock > 0 %}
                        <div class="stock">{{ item.in_stock }} Items Left</div>
                    {% else %}
                        <div class="stock text-danger">Sold Out</div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>

        </div>

    </div>
</div>

{% endblock %}
